<button
	id="theme-toggle"
	data-tooltip-target="tooltip-toggle"
	type="button"
	class="text-gray-500 bg-gray-50 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2"
>
	<svg
		id="theme-toggle-dark-icon"
		class="hidden"
		xmlns="http://www.w3.org/2000/svg"
		width="24"
		height="24"
		fill="none"
		viewBox="0 0 24 24"
	>
		<path
			fill="#6B7280"
			d="M12.495 21a9.494 9.494 0 0 1-7.709-3.964 9.546 9.546 0 0 1-1.663-7.09 9.477 9.477 0 0 1 1.594-3.942 9.444 9.444 0 0 1 3.155-2.843 1.261 1.261 0 0 1 1.363.084 1.251 1.251 0 0 1 .523 1.262l-.68-.052.643.115a8.224 8.224 0 0 0 .955 5.623 8.186 8.186 0 0 0 4.38 3.64 8.242 8.242 0 0 0 4.424.278 1.27 1.27 0 0 1 1.257.476 1.281 1.281 0 0 1 .132 1.342 9.513 9.513 0 0 1-3.485 3.7A9.478 9.478 0 0 1 12.495 21ZM8.436 4.345A7.452 7.452 0 0 0 6 6.5c-.682.927-1.036 2.32-1.283 3.446-.246 1.125-.231 1.926 0 3.054.232 1.128.613 1.993 1.283 2.929.807 1.132 1.982 2.199 3.235 2.796 1.254.598 2.38.862 3.765.775 1.385-.087 2.83-.75 4-1.5 1-.641 2.013-1.371 2.673-2.595-2.29.524-3.552.392-5.173-.166-2.139-.752-3.864-2.272-5-4.239-1.136-1.967-1.628-3.415-1.064-6.655Z"
		></path>
	</svg>

	<svg
		id="theme-toggle-light-icon"
		class="hidden"
		width="24"
		height="24"
		fill="none"
		viewBox="0 0 24 24"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path
			fill="#6B7280"
			d="M12 15c.833 0 1.542-.292 2.125-.875A2.893 2.893 0 0 0 15 12c0-.833-.292-1.542-.875-2.125A2.893 2.893 0 0 0 12 9c-.833 0-1.542.292-2.125.875A2.893 2.893 0 0 0 9 12c0 .833.292 1.542.875 2.125A2.893 2.893 0 0 0 12 15Zm0 2c-1.383 0-2.563-.488-3.537-1.463C7.488 14.563 7 13.383 7 12s.487-2.563 1.463-3.537C9.438 7.488 10.617 7 12 7s2.563.487 3.537 1.463C16.512 9.438 17 10.617 17 12s-.488 2.563-1.463 3.537C14.563 16.512 13.383 17 12 17ZM2 13a.967.967 0 0 1-.712-.287A.968.968 0 0 1 1 12a.97.97 0 0 1 .288-.713A.967.967 0 0 1 2 11h2c.283 0 .52.096.713.287.191.192.287.43.287.713s-.096.52-.287.713A.967.967 0 0 1 4 13H2Zm18 0a.968.968 0 0 1-.712-.287A.968.968 0 0 1 19 12a.97.97 0 0 1 .288-.713A.968.968 0 0 1 20 11h2a.97.97 0 0 1 .712.287c.192.192.288.43.288.713s-.096.52-.288.713A.968.968 0 0 1 22 13h-2Zm-8-8a.968.968 0 0 1-.713-.287A.967.967 0 0 1 11 4V2a.97.97 0 0 1 .287-.712A.968.968 0 0 1 12 1a.97.97 0 0 1 .713.288A.968.968 0 0 1 13 2v2c0 .283-.096.52-.287.713A.968.968 0 0 1 12 5Zm0 18a.968.968 0 0 1-.713-.288A.968.968 0 0 1 11 22v-2a.97.97 0 0 1 .287-.712A.968.968 0 0 1 12 19a.97.97 0 0 1 .713.288A.968.968 0 0 1 13 20v2a.97.97 0 0 1-.287.712A.968.968 0 0 1 12 23ZM5.65 7.05 4.575 6a.87.87 0 0 1-.288-.7 1.09 1.09 0 0 1 .288-.725c.2-.2.442-.3.725-.3s.517.1.7.3L7.05 5.65c.183.2.275.433.275.7 0 .267-.092.5-.275.7a.856.856 0 0 1-.688.288 1.07 1.07 0 0 1-.712-.288ZM18 19.425l-1.05-1.075a1.019 1.019 0 0 1-.275-.713c0-.274.092-.504.275-.687a.856.856 0 0 1 .688-.287c.274.008.512.104.712.287L19.425 18a.87.87 0 0 1 .287.7 1.085 1.085 0 0 1-.287.725c-.2.2-.442.3-.725.3a.908.908 0 0 1-.7-.3ZM16.95 7.05a.856.856 0 0 1-.287-.688 1.07 1.07 0 0 1 .287-.712L18 4.575a.87.87 0 0 1 .7-.288c.283.009.525.105.725.288.2.2.3.442.3.725s-.1.517-.3.7L18.35 7.05c-.2.183-.433.275-.7.275-.267 0-.5-.092-.7-.275ZM4.575 19.425c-.2-.2-.3-.442-.3-.725s.1-.517.3-.7l1.075-1.05c.2-.183.438-.275.712-.275.276 0 .505.092.688.275.2.183.296.413.288.688a1.07 1.07 0 0 1-.288.712L6 19.425a.87.87 0 0 1-.7.287 1.085 1.085 0 0 1-.725-.287Z"
		></path>
	</svg></button
>

<div
	id="tooltip-toggle"
	role="tooltip"
	class="inline-block absolute z-10 invisible px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip"
>
	<span class="dark:hidden inline-block"> Toggle dark mode</span>
	<span class="dark:inline-block hidden"> Toggle light mode</span>
	<div class="tooltip-arrow" data-popper-arrow></div>
</div>

<script>
	const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
	const themeToggleLightIcon = document.getElementById(
		'theme-toggle-light-icon',
	);

	// Change the icons inside the button based on previous settings
	if (
		localStorage.getItem('color-theme') === 'dark' ||
		(!('color-theme' in localStorage) &&
			window.matchMedia('(prefers-color-scheme: dark)').matches)
	) {
		themeToggleLightIcon?.classList.remove('hidden');
	} else {
		themeToggleDarkIcon?.classList.remove('hidden');
	}

	const themeToggleBtn = document.getElementById('theme-toggle');

	let event = new Event('dark-mode');

	themeToggleBtn?.addEventListener('click', function () {
		// toggle icons
		themeToggleDarkIcon?.classList.toggle('hidden');
		themeToggleLightIcon?.classList.toggle('hidden');

		// if set via local storage previously
		if (localStorage.getItem('color-theme')) {
			if (localStorage.getItem('color-theme') === 'light') {
				document.documentElement.classList.add('dark');
				localStorage.setItem('color-theme', 'dark');
			} else {
				document.documentElement.classList.remove('dark');
				localStorage.setItem('color-theme', 'light');
			}

			// if NOT set via local storage previously
		} else {
			if (document.documentElement.classList.contains('dark')) {
				document.documentElement.classList.remove('dark');
				localStorage.setItem('color-theme', 'light');
			} else {
				document.documentElement.classList.add('dark');
				localStorage.setItem('color-theme', 'dark');
			}
		}

		document.dispatchEvent(event);
	});
</script>
